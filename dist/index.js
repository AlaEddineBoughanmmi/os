const{distros:distros,get:get}=require("./distro"),{getPackageManager:getPackageManager}=require("./pkgManagers.js"),{pathWinToLinux:pathWinToLinux}=require("./winVsLinux"),name=()=>get("NAME"),v=()=>get("VERSION_ID"),isRoot=()=>process.getuid&&0===process.getuid()||!1,sudo=()=>isRoot()?"":"sudo ",getPM=(e="install",t,s)=>getPackageManager(t||name(),e,s||v());function getKeyByValue(e,t){return Object.keys(e).find((s=>e[s]===t))}const tags=(e="")=>{const t=name(),s=v(),a=getKeyByValue(distros,t);return[e+a+parseInt(s),e+a]},replacePMByDistro=(e,t,s)=>{const a=getPM("install",t,s),r=getPM("update",t,s),n=getPM("uninstall",t,s);if(e.replace)return e.replace(new RegExp("(?:sudo?:(.*))?(apt -y install|apt-get -y install|apt-get install -y|apt install -y|apt install|apt-get install)","gs"),a).replace(new RegExp("(?:sudo?:(.*))?(apt -y update|apt-get -y update|apt-get update -y|apt update -y|apt update|apt-get update)","gs"),r).replace(new RegExp("(?:sudo?:(.*))?(apt -y remove|apt-get -y remove|apt-get remove -y|apt remove -y|apt remove|apt-get remove)","gs"),n);console.error("@nexssp/os: There was an error. command should be string, but received: ",e),process.exitCode=1},getShell=e=>{if(!e){if("darwin"===process.platform)return"zsh";if("win32"===process.platform)return!0;e=name()}switch(e){case distros.ALPINE:case distros.AMAZON_AMI:return"/bin/sh";case distros.WINDOWS:return!0;case distros.MACOS:return"/bin/zsh";default:return"/bin/bash"}};module.exports={isRoot:isRoot,sudo:sudo,name:name,v:v,distros:distros,get:get,getPM:getPM,tags:tags,replacePMByDistro:replacePMByDistro,getShell:getShell,pathWinToLinux:pathWinToLinux};